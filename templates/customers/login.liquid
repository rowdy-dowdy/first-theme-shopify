<style>
  #recover:target {
    display: flex;
  }
  #recover:target ~ #login {
    display: none;
  }
</style>

<div class="w-full h-32 bg-gray-500 relative text-white flex justify-center items-center px-4 text-sm text-center">
  <h1 class="uppercase text-lg tracking-wider font-semibold">My account</h1>
</div>

<div class="w-full max-w-[1200px] mx-auto px-4 mt-12">
  <div class="flex flex-wrap lg:flex-nowrap lg:space-x-6 justify-center">
    <div class="w-full lg:w-1/2 mb-6">
      {%- form 'recover_customer_password', id: "recover", class: "hidden" -%}
        <div class="flex flex-wrap">
          <h1 class="w-full uppercase font-semibold">
            {{ 'customer.login_page.reset_password_title' | t }}
          </h1>
          <p class="w-full pb-3 pt-4 text-sm text-gray-600">{{ 'customer.login_page.reset_password_subtitle' | t }}</p>
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="RecoverEmail" class="py-3 block">
              {{ 'customer.login_page.email' | t }} <span class="text-red-500">*</span>
            </label>
            <input 
              type="email"
              value=""
              name="email"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              id="RecoverEmail"
              autocorrect="off"
              autocapitalize="off"
              autocomplete="email"
            >
          </div>
          {%- if form.errors -%}
            <h2 class="py-2 text-gray-600 text-sm" >{{ 'templates.contact.form.error_heading' | t }}</h2>
            <div class="w-full px-4 text-gray-600 text-sm">
              {%- for field in form.errors -%}
                <p>* {{ form.errors.messages[field] }}</p>
              {%- endfor -%}
            </div>
          {%- endif -%}
          <div class="w-full py-2">
            <button type="submit" class="border-2 border-gray-800 px-6 py-2 text-sm font-semibold hover:border-sky-500 hover:bg-sky-500 hover:text-white rounded-full">
              {{ 'customer.login_page.reset_password' | t }}
            </button>
          </div>
          <div class="w-full py-2">
            <a href="#login" id="hideRecoverPasswordLink" class="inline-block border-2 border-gray-800 px-6 py-2 text-sm font-semibold hover:border-sky-500 hover:bg-sky-500 hover:text-white rounded-full">
              {{ 'customer.login_page.cancel' | t }}
            </a>
          </div>
        </div>
      {%- endform -%}

      {%- form 'customer_login', novalidate: 'novalidate', id: "login" -%}
        <div class="flex flex-wrap">
          <h1 class="w-full uppercase font-semibold">
            {{ 'customer.login_page.title' | t }}
          </h1>
          {%- if form.errors -%}
            <h2 class="py-2 text-gray-600 text-sm" >{{ 'templates.contact.form.error_heading' | t }}</h2>
            <div class="w-full px-4 text-gray-600 text-sm">
              {%- for field in form.errors -%}
                <p>* {{ form.errors.messages[field] }}</p>
              {%- endfor -%}
            </div>
          {%- endif -%}
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="CustomerEmail" class="py-3 block">
              {{ 'customer.login_page.email' | t }} <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              name="customer[email]"
              autocomplete="email"
              autocorrect="off"
              autocapitalize="off"
            >
          </div>
          {%- if form.password_needed -%}
            <div class="w-full text-gray-500 text-sm mb-2">
              <label for="CustomerPassword" class="py-3 block">
                {{ 'customer.login_page.password' | t }} <span class="text-red-500">*</span>
              </label>
              <input
                type="password"
                class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
                value=""
                name="customer[password]"
                id="CustomerPassword"
                autocomplete="current-password"
              >
            </div>
            <a href="#recover" id="recoverPasswordLink" class="block py-4 text-sm hover:text-sky-600">
              {{ 'customer.login_page.forgot_password' | t }}
            </a>
          {%- endif -%}
          <br>
          <div class="w-full">
            <button type="submit" class="border-2 border-gray-800 px-6 py-2 text-sm font-semibold hover:border-sky-500 hover:bg-sky-500 hover:text-white rounded-full">
              {{ 'customer.login_page.sign_in' | t }}
            </button>
          </div>
        </div>
      {%- endform -%}

    </div>

    <div class="w-full lg:w-1/2 mb-6">
      {%- form 'create_customer', novalidate: 'novalidate' -%}
        <div class="flex flex-wrap">
          <h1 class="w-full uppercase font-semibold">
            {{ 'customer.register.title' | t }}
          </h1>
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="RegisterForm-FirstName" class="py-3 block">
              {{ 'customer.register.first_name' | t }}
            </label>
            <input
              type="text"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              name="customer[first_name]"
              id="RegisterForm-FirstName"
              autocomplete="given-name"
            >
          </div>
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="RegisterForm-LastName" class="py-3 block">
              {{ 'customer.register.last_name' | t }}
            </label>
            <input
              type="text"
              name="customer[last_name]"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              id="RegisterForm-LastName"
              autocomplete="family-name"
            >
          </div>
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="RegisterForm-email" class="py-3 block">
              {{ 'customer.register.email' | t }}
            </label>
            <input
              type="email"
              name="customer[email]"
              id="RegisterForm-email"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              spellcheck="false"
              autocapitalize="off"
              autocomplete="email"
              aria-required="true"
            >
          </div>
          <div class="w-full text-gray-500 text-sm mb-2">
            <label for="RegisterForm-password" class="py-3 block">
              {{ 'customer.register.password' | t }}
            </label>
            <input
              type="password"
              name="customer[password]"
              class="focus:outline-none border border-gray-300 focus:border-gray-800 px-4 py-2 w-full"
              id="RegisterForm-password"
              aria-required="true"
            >
          </div>
          <button type="submit" class="mt-3 border-2 border-gray-800 px-6 py-2 text-sm font-semibold hover:border-sky-500 hover:bg-sky-500 hover:text-white rounded-full">
            {{ 'customer.register.submit' | t }}
          </button>
        </div>
      {%- endform -%}
    </div>
  </div>
</div>

{%- if shop.checkout.guest_login -%}
  <div>
    <hr>
    <h2>{{ 'customer.login_page.guest_title' | t }}</h2>

    {%- form 'guest_login' -%}
      <button>
        {{ 'customer.login_page.guest_continue' | t }}
      </button>
    {%- endform -%}
  </div>
{%- endif -%}

<script>
  let login = document.querySelector('#login')
  let recover = document.querySelector('#recover')

  let hideRecoverPasswordLink = document.querySelector('#hideRecoverPasswordLink')
  let recoverPasswordLink = document.querySelector('#recoverPasswordLink')

  console.log(login,recover)
  hideRecoverPasswordLink.addEventListener('click', function(e) {
    e.preventDefault()

    login.classList.remove('!hidden')
    login.classList.add('!flex')
    recover.classList.add('!hidden')
    recover.classList.remove('!flex')
  })

  recoverPasswordLink.addEventListener('click', function(e) {
    e.preventDefault()

    login.classList.remove('!flex')
    login.classList.add('!hidden')
    recover.classList.add('!flex')
    recover.classList.remove('!hidden')
  })

</script>